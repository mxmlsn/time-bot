# ‚è∞ QW Time Bot

–ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä —á–∞—Å–æ–≤—ã—Ö –ø–æ—è—Å–æ–≤ –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º–∏ –≥–æ—Ä–æ–¥–∞–º–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —á–∞—Ç–∞.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üåç **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –≥–æ—Ä–æ–¥–∞** ‚Äî –∫–∞–∂–¥—ã–π —á–∞—Ç –º–æ–∂–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–≤–æ–π —Å–ø–∏—Å–æ–∫ –≥–æ—Ä–æ–¥–æ–≤
- üîç **–ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —á–∞—Å–æ–≤—ã—Ö –ø–æ—è—Å–æ–≤** ‚Äî –ø—Ä–æ—Å—Ç–æ –≤–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞, –±–æ—Ç –Ω–∞–π–¥—ë—Ç —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å —á–µ—Ä–µ–∑ OpenStreetMap
- üìÖ **–°—Å—ã–ª–∫–∏ –Ω–∞ Google Calendar** ‚Äî –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å—Ç—Ä–µ—á
- üîí **–í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–¥–æ–≤** ‚Äî –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–æ–≤ –≥–æ—Ä–æ–¥–æ–≤
- üí¨ **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã** ‚Äî –ø–æ—à–∞–≥–æ–≤–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –≥–æ—Ä–æ–¥–æ–≤
- ‚ö°Ô∏è **Serverless** ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Vercel —Å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º KV

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—É–±–ª–∏—á–Ω—ã–π –±–æ—Ç (–æ–±—â–∏–π —ç–∫–∑–µ–º–ø–ª—è—Ä)

–î–æ–±–∞–≤—å—Ç–µ [@your_bot_name](https://t.me/your_bot_name) –≤ —Å–≤–æ–π —á–∞—Ç.

### –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å —Å–≤–æ—é –∫–æ–ø–∏—é

[![Deploy with Vercel](https://vercel.com/button)](https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2Fmxmlsn%2Ftime-bot&env=BOT_TOKEN&envDescription=Telegram%20Bot%20Token%20from%20%40BotFather&project-name=time-bot&repository-name=time-bot&demo-title=Time%20Bot&demo-description=Time%20zone%20converter%20for%20distributed%20teams&stores=%5B%7B%22type%22%3A%22kv%22%7D%5D)

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**

1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ [@BotFather](https://t.me/BotFather)
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **Deploy with Vercel** –≤—ã—à–µ
3. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `BOT_TOKEN`
4. –í–∫–ª—é—á–∏—Ç–µ **Vercel KV** —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞
5. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ webhook: `https://your-project.vercel.app/api`

```bash
curl -X POST "https://api.telegram.org/bot<BOT_TOKEN>/setWebhook?url=https://your-project.vercel.app/api"
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏

–ü—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏—Ç–µ –≤—Ä–µ–º—è + –∫–æ–¥ –≥–æ—Ä–æ–¥–∞ –≤ —á–∞—Ç–µ:

```
20–ø      ‚Üí 20:00 –ø–æ –ø–∞—Ä–∏–∂—Å–∫–æ–º—É –≤—Ä–µ–º–µ–Ω–∏, –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ –≤–æ –≤—Å–µ –≥–æ—Ä–æ–¥–∞
15:30—Å   ‚Üí 15:30 –ø–æ —Å—Ç–∞–º–±—É–ª—å—Å–∫–æ–º—É –≤—Ä–µ–º–µ–Ω–∏
10–Ω      ‚Üí 10:00 –ù—å—é-–ô–æ—Ä–∫
```

**–ì–æ—Ä–æ–¥–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:**
- –°—Ç–∞–º–±—É–ª (–∫–æ–¥—ã: `—Å`, `ist`, `—Å—Ç–∞–º–±–∏–∫`)
- –ë–∞–Ω–≥–∫–æ–∫ (–∫–æ–¥—ã: `–±`, `bkk`, `–±–∫–∫`)
- –ü–∞—Ä–∏–∂ (–∫–æ–¥—ã: `–ø`, `p`)
- –ù—å—é-–ô–æ—Ä–∫ (–∫–æ–¥—ã: `–Ω`, `ny`, `–Ω—é`)

### –ö–æ–º–∞–Ω–¥—ã

#### `/start`
–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –±–æ—Ç–∞ –≤ —á–∞—Ç

```
/start
```

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–µ –≥–æ—Ä–æ–¥–∞ –∏ –∫—Ä–∞—Ç–∫—É—é —Å–ø—Ä–∞–≤–∫—É –ø–æ –∫–æ–º–∞–Ω–¥–∞–º.

#### `/help`
–ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –±–æ—Ç–∞ –∏ –∫–∞–∫ –∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è

```
/help
```

#### `/list`
–ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–∏–µ –≥–æ—Ä–æ–¥–∞ –¥–ª—è —ç—Ç–æ–≥–æ —á–∞—Ç–∞ —Å –≤—Ä–µ–º–µ–Ω–µ–º –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç

```
/list
```

–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è, –Ω–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞ –∏ —Ç–µ–≥–∏ –≤ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ:
```
18:00 ‚Äî –ü–∞—Ä–∏–∂ ‚Äî –ø p
21:00 ‚Äî –°—Ç–∞–º–±—É–ª ‚Äî —Å ist —Å—Ç–∞–º–±–∏–∫
...
```

#### `/addcity`
–î–æ–±–∞–≤–∏—Ç—å –≥–æ—Ä–æ–¥ (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º)

**–í–∞—Ä–∏–∞–Ω—Ç 1: –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è –≥–æ—Ä–æ–¥–∞**
```
/addcity
```
–ë–æ—Ç —Å–ø—Ä–æ—Å–∏—Ç: "–ö–∞–∫–æ–π –≥–æ—Ä–æ–¥ —Ö–æ—á–µ—à—å –¥–æ–±–∞–≤–∏—Ç—å?"

**–í–∞—Ä–∏–∞–Ω—Ç 2: —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –≥–æ—Ä–æ–¥–∞**
```
/addcity –õ–æ–Ω–¥–æ–Ω
```

–ë–æ—Ç:
- –ù–∞–π–¥—ë—Ç –≥–æ—Ä–æ–¥ —á–µ—Ä–µ–∑ OpenStreetMap
- –ï—Å–ª–∏ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ ‚Äî –ø–æ–ø—Ä–æ—Å–∏—Ç –≤—ã–±—Ä–∞—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –õ–æ–Ω–¥–æ–Ω, –§—Ä–∞–Ω—Ü–∏—è –∏–ª–∏ –õ–æ–Ω–¥–æ–Ω, –°–®–ê)
- –ü–æ–ø—Ä–æ—Å–∏—Ç —É–∫–∞–∑–∞—Ç—å —Ç–µ–≥–∏ —á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª
- –ü—Ä–æ–≤–µ—Ä–∏—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Ç–µ–≥–æ–≤
- –î–æ–±–∞–≤–∏—Ç –≥–æ—Ä–æ–¥ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –Ω–∞–ø–∏—Å–∞–Ω–∏–µ–º (–ø–µ—Ä–≤–∞—è –±—É–∫–≤–∞ –∑–∞–≥–ª–∞–≤–Ω–∞—è)

**–ü—Ä–∏–º–µ—Ä –ø–æ—Ç–æ–∫–∞:**
```
/addcity –°—Ç–∞–º–±—É–ª
‚Üí –ü–æ –∫–∞–∫–∏–º —Ç–µ–≥–∞–º –∑–∞–ø–æ–º–Ω–∏—Ç—å –≥–æ—Ä–æ–¥?
  –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –°—Ç–∞–º–±—É–ª–∞ —É–¥–æ–±–Ω–æ
  —Å  —Å—Ç  ist  —Å—Ç–∞–º–±–∏–∫
  
  –ü–µ—Ä–µ—á–∏—Å–ª–∏ —á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª.
‚Üí —Å —Å—Ç ist
‚Üí –î–æ–±–∞–≤–ª–µ–Ω –≥–æ—Ä–æ–¥ –°—Ç–∞–º–±—É–ª.
  –¢–µ–≥–∏ ‚Äî —Å —Å—Ç ist
```

**–í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–≥–æ–≤:**
- ‚ùå –ù–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ–≥, —É–∂–µ –∑–∞–Ω—è—Ç—ã–π –¥—Ä—É–≥–∏–º –≥–æ—Ä–æ–¥–æ–º
- ‚úÖ –ë–æ—Ç –ø–æ–∫–∞–∂–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç –∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç –≤—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥–∏–µ —Ç–µ–≥–∏

–ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞:
```
/addcity –ú–∏–ª–∞–Ω
‚Üí (–ø–æ—Å–ª–µ –≤–≤–æ–¥–∞ —Ç–µ–≥–æ–≤: –º ml)

‚úñ –º ‚Äî –ú–æ—Å–∫–≤–∞

–≠—Ç–æ—Ç —Ç–µ–≥ —É–∂–µ –∑–∞–Ω—è—Ç.
–ß—Ç–æ-–Ω–∏–±—É–¥—å –¥—Ä—É–≥–æ–µ?

–ù–∞–∂–º–∏ /–ø–æ, –µ—Å–ª–∏ –∑–∞–º–µ–Ω–∞ –Ω–µ –Ω—É–∂–Ω–∞.
```

#### `/removecity`
–£–¥–∞–ª–∏—Ç—å –≥–æ—Ä–æ–¥

**–í–∞—Ä–∏–∞–Ω—Ç 1: —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –≥–æ—Ä–æ–¥–∞/–∫–æ–¥–∞**
```
/removecity –ª
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è**
```
/removecity
```
–ë–æ—Ç –ø–æ–∫–∞–∂–µ—Ç —Å–ø–∏—Å–æ–∫ –≥–æ—Ä–æ–¥–æ–≤ —Å –Ω–æ–º–µ—Ä–∞–º–∏ –∏ –ø–æ–ø—Ä–æ—Å–∏—Ç –æ—Ç–≤–µ—Ç–∏—Ç—å —Ü–∏—Ñ—Ä–æ–π.

**–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ:**
```
‚Üí –ö–∞–∫–æ–π –≥–æ—Ä–æ–¥ —É–¥–∞–ª–∏—Ç—å?

1. –õ–æ–Ω–¥–æ–Ω
2. –ü–∞—Ä–∏–∂
3. –ñ–µ–Ω–µ–≤–∞

–û—Ç–≤–µ—Ç—å —Ü–∏—Ñ—Ä–æ–π –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª.

‚Üí 1 3
‚Üí –ì–æ—Ä–æ–¥–∞ –õ–æ–Ω–¥–æ–Ω, –ñ–µ–Ω–µ–≤–∞ —É–¥–∞–ª–µ–Ω—ã.
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- **–§—Ä–µ–π–º–≤–æ—Ä–∫:** [grammY](https://grammy.dev/) (Telegram Bot API)
- **–•—Ä–∞–Ω–∏–ª–∏—â–µ:** [Vercel KV](https://vercel.com/docs/storage/vercel-kv) (–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —á–∞—Ç–∞)
- **–ì–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ:** [Nominatim](https://nominatim.org/) (OpenStreetMap, –±–µ–∑ API –∫–ª—é—á–∞)
- **API —á–∞—Å–æ–≤—ã—Ö –ø–æ—è—Å–æ–≤:** [TimeAPI.io](https://timeapi.io/) (–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã ‚Üí —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å)
- **–•–æ—Å—Ç–∏–Ω–≥:** Vercel (serverless functions)

## –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

–ì–æ—Ä–æ–¥–∞ —Ö—Ä–∞–Ω—è—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —á–∞—Ç–∞ –≤ Vercel KV:

```
chat:<chatId>:cities ‚Üí [
  { name: "–õ–æ–Ω–¥–æ–Ω", zone: "Europe/London", codes: ["–ª", "l"], sort: 1 }
]
```

–û–∂–∏–¥–∞—é—â–∏–µ –≤—ã–±–æ—Ä—ã (–ø—Ä–∏ –º–Ω–æ–≥–æ—Å—Ç—É–ø–µ–Ω—á–∞—Ç—ã—Ö –∫–æ–º–∞–Ω–¥–∞—Ö):

```
pending:<chatId>:<userId> ‚Üí { step: "ask_tags", cityName: "–°—Ç–∞–º–±—É–ª", zone: "Europe/Istanbul" }
```

TTL: 5 –º–∏–Ω—É—Ç

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
npm install
vercel dev
```

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ webhook –Ω–∞ ngrok/localhost:

```bash
curl -X POST "https://api.telegram.org/bot<BOT_TOKEN>/setWebhook?url=https://your-ngrok-url.ngrok.io/api"
```

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ |
|----------|-------------|----------|
| `BOT_TOKEN` | –¢–æ–∫–µ–Ω Telegram –±–æ—Ç–∞ –æ—Ç @BotFather | ‚úÖ |
| `REDIS_URL` | URL Redis/Vercel KV (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ Vercel) | ‚úÖ |

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

Issues: [GitHub Issues](https://github.com/mxmlsn/time-bot/issues)
